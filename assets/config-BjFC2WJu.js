import{l as m,_ as k,r as v,m as b,c as f,a as i,g,t as p,o as _}from"./index-BoGxlpu5.js";import{d as y}from"./db-sBcmA5xO.js";import"./_commonjsHelpers-C4iS2aBk.js";function W(w={}){const{immediate:n=!1,onNeedRefresh:o,onOfflineReady:a,onRegistered:r,onRegisteredSW:l,onRegisterError:t}=w;let s,u;const d=async(e=!0)=>{await u};async function c(){if("serviceWorker"in navigator){if(s=await m(async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5-DL_hIMXg.js");return{Workbox:e}},[]).then(({Workbox:e})=>new e("/block-front/sw.js",{scope:"/block-front/",type:"classic"})).catch(e=>{t==null||t(e)}),!s)return;s.addEventListener("activated",e=>{(e.isUpdate||e.isExternal)&&window.location.reload()}),s.addEventListener("installed",e=>{e.isUpdate||a==null||a()}),s.register({immediate:n}).then(e=>{l?l("/block-front/sw.js",e):r==null||r(e)}).catch(e=>{t==null||t(e)})}}return u=c(),d}const A={class:"page"},P={class:"container"},S={key:0},V={__name:"config",setup(w){const n=v(!1),o=v(localStorage.getItem("version")||"Desconhecido"),a=v(null),r=async()=>{confirm("Tem certeza que deseja deletar a blockchain?")&&await y.blocks.clear()},l=W({onNeedRefresh(){n.value=!0,t()},onOfflineReady(){console.log("PWA pronto para uso offline!")}}),t=async()=>{try{const e=await(await fetch("/block-front/version.json")).json();a.value=e.version,o.value!==a.value&&(localStorage.setItem("version",a.value),o.value=a.value,window.location.reload())}catch{a.value="Desconhecido"}},s=()=>{l(),a.value&&(localStorage.setItem("version",a.value),o.value=a.value),alert("Aplicativo atualizado com sucesso! üöÄ"),window.location.reload()},u=async()=>{if("serviceWorker"in navigator){const c=await navigator.serviceWorker.getRegistrations();for(const e of c)await e.unregister();caches.keys().then(e=>{e.forEach(h=>caches.delete(h))}),alert("PWA reinstalado! P√°gina ser√° recarregada."),window.location.reload()}},d=async()=>{await t(),a.value!==o.value?(n.value=!0,localStorage.setItem("version",a.value),o.value=a.value,alert("Nova vers√£o encontrada: "+a.value),window.location.reload()):alert("Voc√™ j√° est√° na vers√£o mais recente!")};return b(t),(c,e)=>(_(),f("div",A,[i("div",P,[i("p",null,"Vers√£o Atual: "+p(o.value),1),n.value?(_(),f("p",S,"Nova vers√£o dispon√≠vel! ("+p(o.value)+" ‚Üí "+p(a.value)+")",1)):g("",!0),n.value?(_(),f("button",{key:1,class:"btn",onClick:s},"Atualizar")):g("",!0),i("button",{class:"btn",onClick:u},"Reinstalar"),i("button",{class:"btn",onClick:d},"Verificar Atualiza√ß√µes"),i("button",{class:"btn",onClick:r},"Deletar chains")])]))}},N=k(V,[["__scopeId","data-v-06579dac"]]);export{N as default};
