import{_ as m,r,h as y,c as p,o as C,i as h,j as I,a,b as d,f as v,v as N,u as b}from"./index-BSU5eZQa.js";const A={"json-container":"_json-container_1yqab_22","json-key":"_json-key_1yqab_26","json-string":"_json-string_1yqab_30","json-number":"_json-number_1yqab_34","json-boolean":"_json-boolean_1yqab_38","json-null":"_json-null_1yqab_42"},_=["innerHTML"],k={__name:"JsonViewer",props:{jsonText:Object},setup(u){const t=u,n=r(""),c=()=>({key:"color: #ffb86c;",string:"color: #50fa7b;",number:"color: #bd93f9;",boolean:"color: #8be9fd;",null:"color: #ff5555;"}),i=o=>{const l=c();return typeof o!="string"&&(o=JSON.stringify(o,null,2)),o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),o.replace(/("(\\u[\da-fA-F]{4}|\\[^u"]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(\.\d+)?([eE][+-]?\d+)?)/g,e=>{let s="";return/^"/.test(e)?/:$/.test(e)?s=l.key:s=l.string:/true|false/.test(e)?s=l.boolean:/null/.test(e)?s=l.null:s=l.number,`<span style="${s}">${e}</span>`})};return y(()=>{n.value=i(t.jsonText)}),(o,l)=>(C(),p("pre",{innerHTML:n.value,class:"json-container"},null,8,_))}},G={$style:A},f=m(k,[["__cssModules",G]]),B=()=>({index:1,hash:"0000",timestamp:Date.now(),data:{},lastHash:"0000"}),j=new URL("data:text/javascript;base64,aW1wb3J0IENyeXB0b0pTIGZyb20gImNyeXB0by1qcyI7CgpzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkgewogIGNvbnN0IHsgbGFzdEJsb2NrLCBkaWZmaWN1bHR5IH0gPSBldmVudC5kYXRhOwogIGxldCBub25jZSA9IDA7CiAgbGV0IGhhc2ggPSAiIjsKICBsZXQgdGltZXN0YW1wOwoKICBjb25zdCBibG9ja0hhc2ggPSAoYmxvY2spID0+IENyeXB0b0pTLlNIQTI1NihKU09OLnN0cmluZ2lmeShibG9jaykpLnRvU3RyaW5nKCk7CgogIHdoaWxlICh0cnVlKSB7CiAgICBub25jZSsrOwogICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTsKICAgIGNvbnN0IG5ld0Jsb2NrID0gewogICAgICBpbmRleDogbGFzdEJsb2NrLmluZGV4ICsgMSwKICAgICAgdGltZXN0YW1wLAogICAgICBub25jZSwKICAgICAgZGF0YTogMTAwMCwKICAgICAgbGFzdEhhc2g6IGxhc3RCbG9jay5oYXNoLAogICAgfTsKCiAgICBoYXNoID0gYmxvY2tIYXNoKG5ld0Jsb2NrKTsKCiAgICAvLyBFbnZpYSBjYWRhIGhhc2ggZ2VyYWRvIHBhcmEgYSBVSQogICAgc2VsZi5wb3N0TWVzc2FnZSh7IGhhc2gsIG5vbmNlLCBkaWZmaWN1bHR5IH0pOwoKICAgIGlmIChoYXNoLnN0YXJ0c1dpdGgoIjAiLnJlcGVhdChkaWZmaWN1bHR5KSkpIHsKICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7IG5ld0Jsb2NrOiB7IC4uLm5ld0Jsb2NrLCBoYXNoIH0sIGRvbmU6IHRydWUgfSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KfTsK",import.meta.url),w=h("blockchain",()=>{const u=r([B()]),t=r(2),n=r(null),c=r(!1),i=r({hash:"",nonce:0,difficulty:t.value}),o=s=>{t.value=s},l=s=>{u.value.push(s)};return{blockchain:u,Mine:()=>{c.value=!1,i.value={},n.value&&n.value.terminate(),n.value=new Worker(j,{type:"module"});const s=JSON.parse(JSON.stringify(u.value.at(-1)));n.value.postMessage({lastBlock:s,difficulty:t.value}),n.value.onmessage=g=>{g.data&&(i.value=g.data),g.data.done&&(l(g.data.newBlock),n.value.terminate(),n.value=null)}},setDifficulty:o,stop:c,currentHash:i}}),Z={class:"page-int"},S={class:"container"},W={class:"group-btns"},K={__name:"blockchain",setup(u){const t=w(),n=r(2),c=I(()=>t.blockchain),i=I(()=>t.currentHash),o=()=>{t.setDifficulty(n.value)};return(l,e)=>(C(),p("div",Z,[a("div",S,[e[3]||(e[3]=a("h3",{class:"title green"},"Blockchain",-1)),e[4]||(e[4]=a("p",{class:"red"},"proof of work",-1)),d(f,{"json-text":i.value},null,8,["json-text"]),e[5]||(e[5]=a("p",{class:"green"},"NÃ­vel de dificuldade",-1)),v(a("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),class:"input",onKeyup:o,placeholder:"dificuldade",min:"0",max:"10"},null,544),[[N,n.value]]),a("div",W,[a("button",{class:"btn",onClick:e[1]||(e[1]=(...s)=>b(t).Mine&&b(t).Mine(...s))},"Mine"),a("button",{class:"btn",onClick:e[2]||(e[2]=s=>b(t).stop=!0)},"Stop")]),d(f,{"json-text":c.value[c.value.length-1]},null,8,["json-text"])])]))}};export{K as default};
