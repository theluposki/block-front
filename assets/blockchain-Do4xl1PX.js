import{_ as k,r as i,h as g,c as v,o as y,i as m,j as p,a as r,b,f as j,v as h,u as d}from"./index-CVEe1-w7.js";const x={"json-container":"_json-container_1yqab_22","json-key":"_json-key_1yqab_26","json-string":"_json-string_1yqab_30","json-number":"_json-number_1yqab_34","json-boolean":"_json-boolean_1yqab_38","json-null":"_json-null_1yqab_42"},M=["innerHTML"],B={__name:"JsonViewer",props:{jsonText:Object},setup(o){const t=o,s=i(""),u=()=>({key:"color: #ffb86c;",string:"color: #50fa7b;",number:"color: #bd93f9;",boolean:"color: #8be9fd;",null:"color: #ff5555;"}),c=l=>{const a=u();return typeof l!="string"&&(l=JSON.stringify(l,null,2)),l=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l.replace(/("(\\u[\da-fA-F]{4}|\\[^u"]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(\.\d+)?([eE][+-]?\d+)?)/g,e=>{let n="";return/^"/.test(e)?/:$/.test(e)?n=a.key:n=a.string:/true|false/.test(e)?n=a.boolean:/null/.test(e)?n=a.null:n=a.number,`<span style="${n}">${e}</span>`})};return g(()=>{s.value=c(t.jsonText)}),(l,a)=>(y(),v("pre",{innerHTML:s.value,class:"json-container"},null,8,M))}},w={$style:x},_=k(B,[["__cssModules",w]]),D=()=>({index:1,hash:"0000",timestamp:Date.now(),data:{},lastHash:"0000"});function H(o){return new Worker("/block-front/assets/mineWorker-BYy4TDko.js",{name:o==null?void 0:o.name})}const T=m("blockchain",()=>{const o=i([D()]),t=i(2),s=i(null),u=i(!1),c=i({hash:"",nonce:0,difficulty:t.value}),l=n=>{t.value=n},a=n=>{o.value.push(n)};return{blockchain:o,Mine:()=>{u.value=!1,c.value={},s.value&&s.value.terminate(),s.value=new H;const n=JSON.parse(JSON.stringify(o.value.at(-1)));s.value.postMessage({lastBlock:n,difficulty:t.value}),s.value.onmessage=f=>{f.data&&(c.value=f.data),f.data.done&&(a(f.data.newBlock),s.value.terminate(),s.value=null)}},setDifficulty:l,stop:u,currentHash:c}}),$={class:"page-int"},q={class:"container"},J={class:"group-btns"},S={__name:"blockchain",setup(o){const t=T(),s=i(2),u=p(()=>t.blockchain),c=p(()=>t.currentHash),l=()=>{t.setDifficulty(s.value)};return(a,e)=>(y(),v("div",$,[r("div",q,[e[3]||(e[3]=r("h3",{class:"title green"},"Blockchain",-1)),e[4]||(e[4]=r("p",{class:"red"},"proof of work",-1)),b(_,{"json-text":c.value},null,8,["json-text"]),e[5]||(e[5]=r("p",{class:"green"},"NÃ­vel de dificuldade",-1)),j(r("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=n=>s.value=n),class:"input",onKeyup:l,placeholder:"dificuldade",min:"0",max:"10"},null,544),[[h,s.value]]),r("div",J,[r("button",{class:"btn",onClick:e[1]||(e[1]=(...n)=>d(t).Mine&&d(t).Mine(...n))},"Mine"),r("button",{class:"btn",onClick:e[2]||(e[2]=n=>d(t).stop=!0)},"Stop")]),b(_,{"json-text":u.value[u.value.length-1]},null,8,["json-text"])])]))}};export{S as default};
