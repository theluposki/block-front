import{_ as x,r as f,h as w,c as m,o as M,i as S,j as k,a as c,b as v,f as B,v as E,u as _}from"./index-BE0ndXaF.js";const H={"json-container":"_json-container_1yqab_22","json-key":"_json-key_1yqab_26","json-string":"_json-string_1yqab_30","json-number":"_json-number_1yqab_34","json-boolean":"_json-boolean_1yqab_38","json-null":"_json-null_1yqab_42"},J=["innerHTML"],N={__name:"JsonViewer",props:{jsonText:Object},setup(l){const s=l,a=f(""),i=()=>({key:"color: #ffb86c;",string:"color: #50fa7b;",number:"color: #bd93f9;",boolean:"color: #8be9fd;",null:"color: #ff5555;"}),t=o=>{const r=i();return typeof o!="string"&&(o=JSON.stringify(o,null,2)),o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),o.replace(/("(\\u[\da-fA-F]{4}|\\[^u"]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(\.\d+)?([eE][+-]?\d+)?)/g,e=>{let n="";return/^"/.test(e)?/:$/.test(e)?n=r.key:n=r.string:/true|false/.test(e)?n=r.boolean:/null/.test(e)?n=r.null:n=r.number,`<span style="${n}">${e}</span>`})};return w(()=>{a.value=t(s.jsonText)}),(o,r)=>(M(),m("pre",{innerHTML:a.value,class:"json-container"},null,8,J))}},q={$style:H},y=x(N,[["__cssModules",q]]),D=()=>({index:1,hash:"0000",timestamp:Date.now(),data:{},lastHash:"0000"});function T(l){return new Worker("/block-front/assets/mineWorker-P_8xJmk6.js",{name:l==null?void 0:l.name})}const $=S("blockchain",()=>{const l=f([D()]),s=f(2),a=f(!1),i=f({}),t=f([]),o=u=>{s.value=u},r=u=>{l.value.push(u)};return{blockchain:l,MineMulti:()=>{a.value=!1,i.value={},t.value.forEach(d=>d.terminate()),t.value=[];const u=JSON.parse(JSON.stringify(l.value.at(-1)));let g=!1;const h=4;for(let d=0;d<h;d++){const b=new T;b.postMessage({lastBlock:u,difficulty:s.value,workerIndex:d}),b.onmessage=p=>{p.data&&(i.value=p.data),p.data.done&&!g&&(g=!0,r(p.data.newBlock),t.value.forEach(j=>j.terminate()),t.value=[])},t.value.push(b)}},StopMining:()=>{a.value=!0,t.value.forEach(u=>{u.postMessage("stop"),u.terminate()}),t.value=[]},setDifficulty:o,stop:a,currentHash:i}}),O={class:"page-int"},V={class:"container"},W={class:"group-btns"},I={__name:"blockchain",setup(l){const s=$(),a=f(2),i=k(()=>s.blockchain),t=k(()=>s.currentHash),o=()=>{s.setDifficulty(a.value)};return(r,e)=>(M(),m("div",O,[c("div",V,[e[3]||(e[3]=c("h3",{class:"title green"},"Blockchain",-1)),e[4]||(e[4]=c("p",{class:"red"},"proof of work",-1)),v(y,{"json-text":t.value},null,8,["json-text"]),e[5]||(e[5]=c("p",{class:"green"},"NÃ­vel de dificuldade",-1)),B(c("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n),class:"input",onKeyup:o,placeholder:"dificuldade",min:"0",max:"10"},null,544),[[E,a.value]]),c("div",W,[c("button",{class:"btn",onClick:e[1]||(e[1]=(...n)=>_(s).MineMulti&&_(s).MineMulti(...n))},"Mine"),c("button",{class:"btn",onClick:e[2]||(e[2]=(...n)=>_(s).StopMining&&_(s).StopMining(...n))},"Stop")]),v(y,{"json-text":i.value[i.value.length-1]},null,8,["json-text"])])]))}};export{I as default};
