import{_ as T,r as b,h as w,c as v,o as k,i as z,a as e,F as D,j as S,t as g,k as M,b as x,f as $,v as E,u as _}from"./index-7nNj2LCV.js";const q={"json-container":"_json-container_1yqab_22","json-key":"_json-key_1yqab_26","json-string":"_json-string_1yqab_30","json-number":"_json-number_1yqab_34","json-boolean":"_json-boolean_1yqab_38","json-null":"_json-null_1yqab_42"},B=["innerHTML"],N={__name:"JsonViewer",props:{jsonText:Object},setup(r){const s=r,u=b(""),o=()=>({key:"color: #ffb86c;",string:"color: #50fa7b;",number:"color: #bd93f9;",boolean:"color: #8be9fd;",null:"color: #ff5555;"}),n=l=>{const c=o();return typeof l!="string"&&(l=JSON.stringify(l,null,2)),l=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l.replace(/("(\\u[\da-fA-F]{4}|\\[^u"]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(\.\d+)?([eE][+-]?\d+)?)/g,t=>{let i="";return/^"/.test(t)?/:$/.test(t)?i=c.key:i=c.string:/true|false/.test(t)?i=c.boolean:/null/.test(t)?i=c.null:i=c.number,`<span style="${i}">${t}</span>`})};return w(()=>{u.value=n(s.jsonText)}),(l,c)=>(k(),v("pre",{innerHTML:u.value,class:"json-container"},null,8,B))}},H={$style:q},j=T(N,[["__cssModules",H]]),C=()=>({index:1,hash:"0000",timestamp:Date.now(),data:{},lastHash:"0000"});function J(r){return new Worker("/block-front/assets/mineWorker-Vdxk6qtc.js",{name:r==null?void 0:r.name})}const V=z("blockchain",()=>{const r=b([C()]),s=b(2),u=b(!1),o=b({}),n=b([]),l=b(null),c=a=>{s.value=a},t=a=>{r.value.push(a)};return{blockchain:r,MineMulti:()=>{u.value=!1,o.value={},n.value.forEach(f=>f.terminate()),n.value.length=0,l.value=Date.now();const a=JSON.parse(JSON.stringify(r.value.at(-1)));let m=!1;const h=navigator.hardwareConcurrency||4;console.log("hardwareConcurrency: ",navigator.hardwareConcurrency);for(let f=0;f<h;f++){const y=new J;y.postMessage({lastBlock:a,difficulty:s.value,workerIndex:f,startNonce:f*1e5}),y.onmessage=d=>{d.data&&d.data.hash!==o.value.hash&&(o.value=d.data),d.data.done&&!m&&(m=!0,t(d.data.newBlock),n.value.forEach(p=>p.terminate()),n.value.length=0)},n.value.push(y)}},StopMining:()=>{u.value=!0,n.value.forEach(a=>{a.postMessage("stop"),a.terminate()}),n.value.length=0},setDifficulty:c,stop:u,currentHash:o,getElapsedTime:()=>{if(!l.value)return"0s";const a=Date.now()-l.value,m=Math.floor(a/(1e3*60*60*24)),h=Math.floor(a%(1e3*60*60*24)/(1e3*60*60)),f=Math.floor(a%(1e3*60*60)/(1e3*60)),y=Math.floor(a%(1e3*60)/1e3),d=a%1e3,p=[];return m>0&&p.push(`${m}d`),h>0&&p.push(`${h}h`),f>0&&p.push(`${f}m`),y>0&&p.push(`${y}s`),d>0&&p.push(`${d}ms`),p.join(" ")}}}),F={border:"1",cellpadding:"5"},I={__name:"tableDifficulty",setup(r){const s=[{zeros:1,probability:"1 em 16",difficulty:"1x"},{zeros:2,probability:"1 em 256",difficulty:"16x"},{zeros:3,probability:"1 em 4.096",difficulty:"256x"},{zeros:4,probability:"1 em 65.536",difficulty:"4.096x"},{zeros:5,probability:"1 em 1.048.576",difficulty:"65.536x"},{zeros:6,probability:"1 em 16.777.216",difficulty:"1.048.576x"},{zeros:7,probability:"1 em 268.435.456",difficulty:"16.777.216x"},{zeros:8,probability:"1 em 4.294.967.296",difficulty:"268.435.456x"},{zeros:9,probability:"1 em 68.719.476.736",difficulty:"4.294.967.296x"},{zeros:10,probability:"1 em 1.099.511.627.776",difficulty:"68.719.476.736x"},{zeros:11,probability:"1 em 17.592.186.044.416",difficulty:"1.099.511.627.776x"},{zeros:12,probability:"1 em 281.474.976.710.656",difficulty:"17.592.186.044.416x"}];return(u,o)=>(k(),v("div",null,[o[1]||(o[1]=e("h5",null,"Tabela de Dificuldade para Hash com Zeros à Esquerda",-1)),e("table",F,[o[0]||(o[0]=e("thead",null,[e("tr",null,[e("th",null,"Número de Zeros à Esquerda"),e("th",null,"Probabilidade de Acerto (aproximada)"),e("th",null,"Dificuldade Relativa")])],-1)),e("tbody",null,[(k(),v(D,null,S(s,(n,l)=>e("tr",{key:l},[e("td",null,g(n.zeros),1),e("td",null,g(n.probability),1),e("td",null,g(n.difficulty),1)])),64))])])]))}},O=T(I,[["__scopeId","data-v-9a13e33a"]]),W={class:"page-int"},L={class:"container"},R={class:"group-btns"},U={class:"green"},Z={__name:"blockchain",setup(r){const s=V(),u=b(2),o=M(()=>s.blockchain),n=M(()=>s.currentHash),l=()=>{s.setDifficulty(u.value)};return(c,t)=>(k(),v("div",W,[e("div",L,[t[4]||(t[4]=e("h3",{class:"title green"},"Blockchain",-1)),t[5]||(t[5]=e("p",{class:"red"},"proof of work",-1)),x(j,{"json-text":n.value},null,8,["json-text"]),e("details",null,[t[3]||(t[3]=e("summary",{class:"green"},"Nível de dificuldade",-1)),x(O)]),$(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=i=>u.value=i),class:"input",onKeyup:l,placeholder:"dificuldade",min:"0",max:"10"},null,544),[[E,u.value]]),e("div",R,[e("button",{class:"btn",onClick:t[1]||(t[1]=(...i)=>_(s).MineMulti&&_(s).MineMulti(...i))},"Mine"),e("button",{class:"btn",onClick:t[2]||(t[2]=(...i)=>_(s).StopMining&&_(s).StopMining(...i))},"Stop")]),e("p",U,"Tempo de mineração: "+g(_(s).getElapsedTime()),1),x(j,{"json-text":o.value[o.value.length-1]},null,8,["json-text"])])]))}};export{Z as default};
