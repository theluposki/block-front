import{_ as k,r as c,h as m,c as g,o as y,i as j,j as b,a as i,b as _,f as M,v as h,u as p}from"./index-yomw5UMG.js";const x={"json-container":"_json-container_1yqab_22","json-key":"_json-key_1yqab_26","json-string":"_json-string_1yqab_30","json-number":"_json-number_1yqab_34","json-boolean":"_json-boolean_1yqab_38","json-null":"_json-null_1yqab_42"},S=["innerHTML"],w={__name:"JsonViewer",props:{jsonText:Object},setup(o){const s=o,n=c(""),r=()=>({key:"color: #ffb86c;",string:"color: #50fa7b;",number:"color: #bd93f9;",boolean:"color: #8be9fd;",null:"color: #ff5555;"}),u=l=>{const a=r();return typeof l!="string"&&(l=JSON.stringify(l,null,2)),l=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l.replace(/("(\\u[\da-fA-F]{4}|\\[^u"]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(\.\d+)?([eE][+-]?\d+)?)/g,e=>{let t="";return/^"/.test(e)?/:$/.test(e)?t=a.key:t=a.string:/true|false/.test(e)?t=a.boolean:/null/.test(e)?t=a.null:t=a.number,`<span style="${t}">${e}</span>`})};return m(()=>{n.value=u(s.jsonText)}),(l,a)=>(y(),g("pre",{innerHTML:n.value,class:"json-container"},null,8,S))}},B={$style:x},v=k(w,[["__cssModules",B]]),H=()=>({index:1,hash:"0000",timestamp:Date.now(),data:{},lastHash:"0000"});function D(o){return new Worker("/block-front/assets/mineWorker-Dz3VdWHX.js",{name:o==null?void 0:o.name})}const q=j("blockchain",()=>{const o=c([H()]),s=c(2),n=c(null),r=c(!1),u=c({hash:"",nonce:0,difficulty:s.value}),l=f=>{s.value=f},a=f=>{o.value.push(f)};return{blockchain:o,Mine:()=>{r.value=!1,u.value={},n.value&&n.value.terminate(),n.value=new D;const f=JSON.parse(JSON.stringify(o.value.at(-1)));n.value.postMessage({lastBlock:f,difficulty:s.value}),n.value.onmessage=d=>{d.data&&(u.value=d.data),d.data.done&&(a(d.data.newBlock),n.value.terminate(),n.value=null)}},StopMining:()=>{r.value=!0,n.value&&(n.value.postMessage("stop"),n.value.terminate(),n.value=null)},setDifficulty:l,stop:r,currentHash:u}}),J={class:"page-int"},N={class:"container"},T={class:"group-btns"},W={__name:"blockchain",setup(o){const s=q(),n=c(2),r=b(()=>s.blockchain),u=b(()=>s.currentHash),l=()=>{s.setDifficulty(n.value)};return(a,e)=>(y(),g("div",J,[i("div",N,[e[3]||(e[3]=i("h3",{class:"title green"},"Blockchain",-1)),e[4]||(e[4]=i("p",{class:"red"},"proof of work",-1)),_(v,{"json-text":u.value},null,8,["json-text"]),e[5]||(e[5]=i("p",{class:"green"},"NÃ­vel de dificuldade",-1)),M(i("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),class:"input",onKeyup:l,placeholder:"dificuldade",min:"0",max:"10"},null,544),[[h,n.value]]),i("div",T,[i("button",{class:"btn",onClick:e[1]||(e[1]=(...t)=>p(s).Mine&&p(s).Mine(...t))},"Mine"),i("button",{class:"btn",onClick:e[2]||(e[2]=(...t)=>p(s).StopMining&&p(s).StopMining(...t))},"Stop")]),_(v,{"json-text":r.value[r.value.length-1]},null,8,["json-text"])])]))}};export{W as default};
